{% extends 'app.twig' %}

{% block content %}

<div id="root">
    <header>
        <div class="flex justify-between items-center bg-gray-900 px-12 py-6 text-white">
            <div class="text-2xl tracking-tighter">
                Jabit
            </div>
            <div>
                {% if auth.check %}
                <form action="{{ url_for('logout.store') }}" method="post">
                    {{ csrf.html | raw }}
                    <input class="bg-transparent focus:outline-none focus:shadow-outline" type="submit" value="Logout">
                </form>
                {% else %}
                    <a href="{{ url_for('login.index') }}">Login</a>
                {% endif %}
            </div>
        </div>
    </header>
    <div class="">

        {% include "includes/_messages.twig" %}
        {% include "includes/_errors.twig" %}

        <add-reminder :dates="{{ dates.getAll | json_encode }}" :csrf="{{ csrf.data | json_encode }}"></add-reminder>

        <div class="p-4 pt-0 pl-0 md:flex md:flex-wrap justify-start">
            <!-- Loop over existing reminders  -->
            
            {% if reminders is iterable %}
            {% for reminder in reminders %}
            <div class="p-4 pr-0 pb-0 md:w-1/2 lg:w-1/3">
                <div class="px-4 py-6 h-full bg-white rounded shadow">
                    <div class="p-4">
                        <span class="hidden mt-2 block text-xs uppercase text-gray-500">Body</span>
                        <span class="text-2xl text-gray-800">{{ reminder.body }}</span>
                    </div>
                    <div class="md:flex flex-wrap">
                        <div class="px-4 py-2">
                            <span class="mt-2 block tracking-wider text-xs uppercase text-gray-500">Frequency</span>
                            <span class="text-lg text-gray-800">{{ reminder.frequency | title }}</span>
                        </div>
                        <div class="px-4 py-2">
                            <span class="mt-2 block tracking-wider text-xs uppercase text-gray-500">Day</span>
                            <span class="text-lg text-gray-800">{{ reminder.day ?: '-' }}</span>
                        </div>
                        <div class="px-4 py-2">
                            <span class="mt-2 block tracking-wider text-xs uppercase text-gray-500">Date</span>
                            <span class="text-lg text-gray-800">{{ reminder.date ?: '-' }}</span>
                        </div>
                        <div class="px-4 py-2">
                            <span class="mt-2 block tracking-wider text-xs uppercase text-gray-500">Time</span>
                            <span class="text-lg text-gray-800">{{ reminder.time }}</span>
                        </div>
                        <div class="px-4 py-2">
                            <span class="mt-2 block tracking-wider text-xs uppercase text-gray-500">Runs Once?</span>
                            <span class="text-lg text-gray-800">{{ reminder.run_once ? "Yes" : "No" }}</span>
                        </div>
                    </div>
                    <div class="flex justify-end items-center">
                        <form action="{{ url_for('reminders.delete', {id: reminder.id}) }}" method="post">
                            {{ csrf.html | raw }}
                            <input type="hidden" name="_METHOD" value="DELETE" />
                            <button type="submit"
                                class="px-4 py-1 uppercase text-xs tracking-wider text-red-500 focus:outline-none focus:shadow-outline">Remove</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}